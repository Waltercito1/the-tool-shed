<% if @reservations.length > 0 %>

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 bg-white shadow overflow-hidden sm:rounded-lg">
<% @reservations.each do |r| %>

  <div class="px-4 py-5 sm:px-6">
    <h3 class="mt-6 text-2xl leading-6 font-medium text-gray-900">
      <%= r.listing.title %> 
    </h3>
  </div>
  <div class="mb-8 pb-8 border-t border-gray-200">
    <dl>
      <div class="bg-gray-50 px-4 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Tool Owner
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= r.listing.lender.full_name %>
        </dd>
      </div>
      <div class="bg-white px-4 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Contact email:
        </dt>
        <dd class="mt-1 text-sm text-blue-700 sm:mt-0 sm:col-span-2">
          <%= r.listing.lender.email %>
        </dd>
      </div>
      <div class="bg-gray-50 px-4 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Tool pick up address (unless arrenged otherwise):
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= r.listing.lender.full_address %>
        </dd>
      </div>
      <div class="bg-white px-4 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Reservation status:
        </dt>
        <dd class="mt-1 text-sm text-red-900 sm:mt-0 sm:col-span-2">
          <%= r.status %>
        </dd>
      </div>
      <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Dates requested:
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <p><%= r.check_in.strftime("%A, %B %e, %Y") %><strong> to </strong><%= r.check_out.strftime("%A, %B %e, %Y") %>. <strong>Duration:</strong> <%= r.duration %> day(s).</p>
        </dd>
      </div>
      <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Cost per day
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
         $<%= r.listing.price %><p><strong> Total cost:</strong> $<%= r.total_price %></p>
        </dd><hr>
      </div>
      <div class="bg-white px-4 py-1 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Tool Category:
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= r.listing.category %>
        </dd>
      </div>
      <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
        <dt class="text-sm font-medium text-gray-900">
          Description:
        </dt>
        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
          <%= r.listing.description %> 
        </dd>
      </div>
      <div class="flex space-x-3 mb-4 text-sm font-medium">
      <% if r.check_out > Date.today %>
        <div class="flex-auto flex space-x-3">
            <%= link_to "Modify or Delete your reservation", r, url:"/reservations/#{r.id}/edit", class:"w-1/4 flex items-center justify-center rounded-md bg-green-300 border border-solid border-green-300" %>
        </div>
      <% else %>
 
        <div class="flex-auto flex space-x-3">
            <%= link_to "Write a Review", new_listing_review_path(r.listing.id), class:"w-1/4 flex items-center justify-center rounded-md bg-blue-300 border border-solid border-blue-300" %>    
        </div>
      </div>
      <% end %>
    </dl>
  </div>
<% end %>
<% else %>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="max-w-8xl w-full px-4 py-5 sm:px-6">
        <h3 class="mt-6 text-2xl leading-6 font-medium text-gray-900">
          You have no reservations to list.
        </h3>
      </div>
      <div class="mb-6 flex-auto flex space-x-3">
      <%= link_to 'Back to Lisitng', :back,  class:"w-1/4 flex items-center justify-center rounded-md bg-green-300 border border-solid border-green-300" %>
      </div>
  </div>
</div>
<% end %>
